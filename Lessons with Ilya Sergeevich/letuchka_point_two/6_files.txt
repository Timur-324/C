Ниже приведён подробный обзор работы с файловым вводом/выводом в языке C, включая методы чтения и записи файлов, различия между типизированными (обычно текстовыми) и не типизированными (бинарными) файлами, а также форматируемый ввод/вывод.

─────────────────────────────  
1. Файловый ввод/вывод (I/O)

Работа с файлами в C осуществляется через стандартную библиотеку <stdio.h>, которая предоставляет набор функций для открытия, закрытия, чтения и записи данных в файлы.

• Открытие файла:  
 – Функция fopen используется для открытия файла.  
 – Сигнатура:  
  FILE *fopen(const char *имя_файла, const char *режим);  
 – Режим работы определяет, как файл будет использоваться:  
  "r" – для чтения;  
  "w" – для записи (если файл существует, он перезаписывается);  
  "a" – для добавления данных;  
  "rb", "wb", "ab" – режимы для работы с бинарными файлами.

• Закрытие файла:  
 – После завершения работы с файлом его необходимо закрыть вызовом fclose.  
 – Пример:  
  fclose(файл);

─────────────────────────────  
2. Методы чтения и записи файлов

C предоставляет функции для как неблокированного, так и форматированного ввода/вывода.

• Неблокированный (низкоуровневый) ввод/вывод:  
 – Функция fread: используется для чтения блоков данных из файла.  
  Прототип: size_t fread(void *буфер, size_t размер_элемента, size_t количество, FILE *файл);  
 – Функция fwrite: используется для записи блоков данных в файл.  
  Прототип: size_t fwrite(const void *буфер, size_t размер_элемента, size_t количество, FILE *файл);  
 – Эти функции удобны для чтения/записи бинарных данных или массивов структур.

• Форматированный ввод/вывод:  
 – Для работы с текстовыми данными используются функции fprintf, fscanf, fgetc, fputc, fgets, fputs и т.д.  
 – Примеры:  
  • fprintf: записывает данные в файл по заданному формату, аналогично printf, но для файла.  
   fprintf(file, "Число: %d\n", число);  
  • fscanf: читает данные из файла по формату, аналогично scanf.  
   fscanf(file, "%d", &число);

• Примеры простейшей записи и чтения:  
 – Запись текста в файл (текстовый файл):  
  FILE *f = fopen("example.txt", "w");  
  if (f != NULL) {  
   fprintf(f, "Пример записи строки и числа: %s, %d\n", "текст", 123);  
   fclose(f);  
  }  
 – Чтение строки из файла:  
  FILE *f = fopen("example.txt", "r");  
  char buffer[256];  
  if (f != NULL) {  
   while (fgets(buffer, sizeof(buffer), f)) {  
    // обработка строки  
    printf("%s", buffer);  
   }  
   fclose(f);  
  }

─────────────────────────────  
3. Типизированные и не типизированные файлы

В контексте работы с файлами можно разделить их на типизированные и не типизированные.

• Типизированные файлы (Text Files):  
 – Это файлы, в которых данные хранятся в текстовом, читабельном формате.  
 – Пример: файлы с расширением .txt.  
 – Чтение и запись осуществляется с использованием функций fprintf/fscanf, fgets/fputs, и данные в файле представлены в виде символов, что упрощает отладку и просмотр содержимого.

• Нетипизированные файлы (Binary Files):  
 – Это файлы, в которых данные сохраняются в исходном двоичном представлении (в виде последовательности байтов).  
 – Пример: файлы с изображениями, бинарные базы данных, исполняемые файлы.  
 – Для работы с бинарными файлами используются функции fread и fwrite.  
 – Пример записи структуры в бинарный файл:
  struct Point { int x; int y; };
  FILE *binFile = fopen("points.bin", "wb");
  if (binFile != NULL) {
   struct Point pt = {10, 20};
   fwrite(&pt, sizeof(struct Point), 1, binFile);
   fclose(binFile);
  }

• Отличия:  
 – В текстовых файлах данные представлены в виде символов, разделённые пробелами, переводами строки и т.д.  
 – В бинарных файлах данные сохраняются побайтно, что обеспечивает более компактное хранение и более быструю запись/чтение, но не позволяет напрямую редактировать файл текстовым редактором.

─────────────────────────────  
4. Форматируемый ввод/вывод в языке Си

Форматируемый ввод/вывод позволяет посредством указания шаблонов (форматов) считывать или записывать данные определённого типа.

• Функции форматированного вывода:  
 – printf: вывод на стандартное устройство вывода (обычно консоль).  
 – fprintf: вывод в поток, привязанный к файлу.
 – sprintf: запись форматированного вывода в строку.

• Функции форматированного ввода:  
 – scanf: чтение со стандартного ввода.  
 – fscanf: чтение из потока, привязанного к файлу.
 – sscanf: считывание из строки согласно формату.

• Пример использования fscanf и fprintf с файлом:  
  // Запись данных в файл с форматированием  
  FILE *file = fopen("data.txt", "w");
  if (file != NULL) {
   int a = 100;
   double b = 3.14;
   fprintf(file, "Int: %d, Double: %.2f\n", a, b);
   fclose(file);
  }
  // Чтение данных  
  file = fopen("data.txt", "r");
  if (file != NULL) {
   int a;
   double bФайловый ввод/вывод в языке Си — это важный аспект работы с данными. Он позволяет программе взаимодействовать с файлами на диске, считывая данные из них и записывая данные в них. Ниже приведены основные методы работы с файлами в Си, а также объяснения различий между типизированными и не типизированными файлами.

### Основные операции с файлами

1. **Открытие файла**: Для работы с файлом необходимо сначала его открыть с помощью функции `fopen()`. Эта функция принимает два параметра: имя файла и режим доступа (чтение, запись и т.д.).

   ```c
   FILE *file = fopen("example.txt", "r"); // Открытие файла для чтения
   ```

2. **Чтение из файла**: Для чтения данных из файла используются функции `fgetc()`, `fgets()` и `fread()`.
   - `fgetc(FILE *stream)` — считывает один символ.
   - `fgets(char *str, int n, FILE *stream)` — считывает строку.
   - `fread(void *ptr, size_t size, size_t count, FILE *stream)` — считывает массив данных.

   Пример чтения строки из файла:

   ```c
   char buffer[100];
   fgets(buffer, sizeof(buffer), file);
   ```

3. **Запись в файл**: Для записи данных в файл используются функции `fputc()`, `fputs()` и `fwrite()`.
   - `fputc(int char, FILE *stream)` — записывает один символ.
   - `fputs(const char *str, FILE *stream)` — записывает строку.
   - `fwrite(const void *ptr, size_t size, size_t count, FILE *stream)` — записывает массив данных.

   Пример записи строки в файл:

   ```c
   fputs("Hello, World!", file);
   ```

4. **Закрытие файла**: После завершения работы с файлом его необходимо закрыть с помощью функции `fclose()`.

   ```c
   fclose(file);
   ```

### Типизированные и не типизированные файлы

- **Типизированные файлы**: Это файлы, которые используются для хранения данных определенного типа, например, `int`, `float`, `char` и т.д. Функции `fread()` и `fwrite()` применяются для работы с типизированными файлами, позволяя записывать и считывать данные в бинарном формате.

- **Не типизированные файлы**: Это текстовые файлы, которые содержат данные в текстовом формате. Они могут быть прочитаны и записаны с использованием стандартных функций ввода/вывода, таких как `fgetc()`, `fgets()`, `fprintf()` и `fscanf()`.

### Форматируемый ввод/вывод

Форматируемый ввод/вывод в языке Си позволяет работать с данными определенного формата, что особенно удобно для работы с текстовыми файлами.

- **Чтение с форматированием**: Функция `fscanf()` позволяет считывать данные из файла с указанием формата.

   ```c
   int num;
   fscanf(file, "%d", &num); // Считывает целое число
   ```

- **Запись с форматированием**: Функция `fprintf()` используется для записи данных в файл в заданном формате.

   ```c
   fprintf(file, "Number: %d\n", num); // Записывает целое число в файл
   ```

### Пример работы с файлами

Вот небольшой пример, который демонстрирует, как открыть файл, записать в него данные и затем считать эти данные:

```c
#include <stdio.h>

int main() {
    FILE *file;
    int num = 42;

    // Открытие файла для записи
    file = fopen("data.txt", "w");
    if (file == NULL) {
        printf("Ошибка открытия файла!\n");
        return 1;
    }

    // Запись данных в файл
    fprintf(file, "%d\n", num);
    fclose(file); // Закрытие файла

    // Открытие файла для чтения
    file = fopen("data.txt", "r");
    if (file == NULL) {
        printf("Ошибка открытия файла!\n");
        return 1;
    }

    // Чтение данных из файла
    fscanf(file, "%d", &num);
    printf("Считанное число: %d\n", num);
    
    fclose(file); // Закрытие файла
    return 0;
}
```

В этом коде мы создаем файл, записываем в него значение целого числа, а затем открываем файл снова для чтения этого значения. 

Таким образом, работа с файлами в языке Си является важной частью программирования, позволяя сохранять и обрабатывать данные эффективно.